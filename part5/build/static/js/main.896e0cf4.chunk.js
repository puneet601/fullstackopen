(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),o=a(8),u=a.n(o),s=a(13),i=a(9),m=a(42),p=a(12),d=a(71),f=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),l=a[0],c=a[1],o={display:l?"none":""},u={display:l?"":"none"},s=function(){c(!l)};return r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement("button",{onClick:s},e.buttonLabel)),r.a.createElement("div",{style:u},e.children,r.a.createElement("button",{onClick:s},"cancel")))},b=a(27),g=a.n(b),v=null,h=function(e){v="bearer ".concat(e)},E={getAll:function(){return g.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(s.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(a),n={headers:{Authorization:v}},e.next=4,g.a.post("/api/blogs",t,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),setToken:h,update:function(){var e=Object(s.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.put("".concat("/api/blogs","/").concat(t),a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:v}},e.next=3,g.a.delete("".concat("/api/blogs","/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=a(72),y=a.n(w),O=a(74),j=a.n(O),k=function(e){var t=e.blog,a=e.setUpdate,n=e.blogs,l=e.setBlogs,c=e.setShowUserProfile,o=function(){var e=Object(s.a)(u.a.mark((function e(r){var c,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.id,r.preventDefault(),o=t.likes+1,s=Object(d.a)({},t,{likes:o}),e.next=6,E.update(t.id,s);case 6:l(n.map((function(e){return e.id!==c?e:s}))),a(Math.floor(100*Math.random()));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(s.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!window.confirm("Do you wante to Delete ".concat(t.title," ?"))){e.next=5;break}return e.next=4,E.remove(t.id);case 4:l(n.filter((function(e){return e.id!==t.id})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=t.user;return r.a.createElement("div",{style:{},className:"blog"},r.a.createElement("h2",null,t.title),r.a.createElement("span",{onClick:function(){return c(m)}},t.author),r.a.createElement(f,{buttonLabel:"view"},r.a.createElement("div",null,t.title," ",r.a.createElement("br",null)," ",t.url," ",r.a.createElement("br",null)," ",t.author," ",r.a.createElement("br",null)," likes: ",t.likes," ",r.a.createElement("br",null),r.a.createElement("button",{type:"submit",onClick:o},r.a.createElement(y.a,null)),r.a.createElement("button",{type:"submit",onClick:i},r.a.createElement(j.a,null)))))},x={login:function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=a(169),C=a(164),N=a(161),U=a(166),B=a(163),D=a(168),P=a(158),T=a(165),W=a(167),A=a(51),I=a.n(A),q=a(78),F=a(159),M=a(160);function V(){return r.a.createElement(q.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(P.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var J=Object(F.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),L=function(e){var t=e.handleSubmit,a=e.handleUsernameChange,n=e.handlePasswordChange,l=e.username,c=e.password,o=J();return r.a.createElement(M.a,{component:"main",maxWidth:"xs"},r.a.createElement(N.a,null),r.a.createElement("div",{className:o.paper},r.a.createElement(S.a,{className:o.avatar},r.a.createElement(I.a,null)),r.a.createElement(q.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:o.form,onSubmit:t,noValidate:!0},r.a.createElement(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Username",value:l,placeholder:"Username",onChange:a,autoComplete:"username",autoFocus:!0}),r.a.createElement(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",placeholder:"Password",value:c,onChange:n,autoComplete:"current-password"}),r.a.createElement(B.a,{control:r.a.createElement(D.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit},"Sign In"),r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,xs:!0},r.a.createElement(P.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(T.a,{item:!0},r.a.createElement(P.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(W.a,{mt:8},r.a.createElement(V,null)))},z=a(75),R=a.n(z),Y=a(54),H=a.n(Y),K=function(e){var t=e.showWhenVisible,a=e.setNewBlogVisible,n=e.newTitle,l=e.setNewTitle,c=e.newAuthor,o=e.setNewAuthor,u=e.newUrl,s=e.setNewUrl,i=e.addBlog;return r.a.createElement("div",null,r.a.createElement("div",{style:t},r.a.createElement("h1",null,"Create new Blog"),r.a.createElement("form",null,"title:",r.a.createElement("input",{type:"text",value:n,onChange:function(e){var t=e.target;return l(t.value)}}),r.a.createElement("br",null),"author:",r.a.createElement("input",{type:"text",value:c,onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement("br",null),"Blog :",r.a.createElement("br",null),r.a.createElement("textarea",{value:u,onChange:function(e){var t=e.target;return s(t.value)},rows:"5",cols:"30"}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",onClick:i},r.a.createElement(R.a,null)),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",onClick:function(){return a(!1)}},r.a.createElement(H.a,null)))))},G={signin:function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/users",t);case 2:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBlogs:function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("/api/users","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q=a(162),X=a(76),Z=a.n(X);function $(){return r.a.createElement(q.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(P.a,{color:"inherit",href:"https://github.com/puneet601"},"Puneet Kaur Jattana")," ",(new Date).getFullYear(),".")}var _=Object(F.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(".concat(Z.a,")"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ee=function(e,t){var a=_(),l=Object(n.useState)(""),c=Object(i.a)(l,2),o=c[0],m=c[1],p=Object(n.useState)(""),d=Object(i.a)(p,2),f=d[0],b=d[1],g=Object(n.useState)(""),v=Object(i.a)(g,2),h=v[0],E=v[1],w=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,G.signin({username:f,password:h,email:o});case 4:m(""),b(""),E(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(T.a,{container:!0,component:"main",className:a.root},r.a.createElement(N.a,null),r.a.createElement(T.a,{item:!0,xs:!1,sm:4,md:1}),r.a.createElement(T.a,{item:!0,xs:!1,sm:4,md:5,className:a.image}),r.a.createElement(T.a,{item:!0,xs:12,sm:8,md:5,component:Q.a,elevation:6,square:!0},r.a.createElement("div",{className:a.paper},r.a.createElement(S.a,{className:a.avatar},r.a.createElement(I.a,null)),r.a.createElement(q.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:o,onChange:function(e){var t=e.target;return m(t.value)},type:"text",autoComplete:"email",autoFocus:!0}),r.a.createElement(U.a,{variant:"outlined",margin:"normal",id:"username",required:!0,fullWidth:!0,label:"Username",name:"username",value:f,onChange:function(e){var t=e.target;return b(t.value)}}),r.a.createElement(U.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",placeholder:"Password",value:h,onChange:function(e){var t=e.target;return E(t.value)},autoComplete:"current-password"}),r.a.createElement(B.a,{control:r.a.createElement(D.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:w},"Sign In"),r.a.createElement(T.a,{container:!0},r.a.createElement(T.a,{item:!0,xs:!0},r.a.createElement(P.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(T.a,{item:!0},r.a.createElement(P.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(W.a,{mt:5},r.a.createElement($,null))))))},te=function(e){var t=e.showUserProfile,a=e.getUsersBlogs,n=e.setShowUserProfile;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,t.username),r.a.createElement("br",null),console.log(a),r.a.createElement("button",{className:"button",onClick:function(){return n("")}},"Back"))},ae=function(e){var t=e.message,a=e.status;return null===t?null:!1===a?r.a.createElement("div",{className:"error"},t):r.a.createElement("div",{className:"success"},t)},ne=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=(t[0],t[1],Object(n.useState)(!1)),l=Object(i.a)(a,2),c=(l[0],l[1],Object(n.useState)(!1)),o=Object(i.a)(c,2),d=o[0],f=o[1],b=Object(n.useState)([]),g=Object(i.a)(b,2),v=g[0],h=g[1],w=Object(n.useState)(null),y=Object(i.a)(w,2),O=y[0],j=y[1],S=Object(n.useState)(""),C=Object(i.a)(S,2),N=C[0],U=C[1],B=Object(n.useState)(""),D=Object(i.a)(B,2),P=D[0],T=D[1],W=Object(n.useState)(null),A=Object(i.a)(W,2),I=A[0],q=A[1],F=Object(n.useState)(""),M=Object(i.a)(F,2),V=M[0],J=M[1],z=Object(n.useState)(""),R=Object(i.a)(z,2),Y=R[0],H=R[1],Q=Object(n.useState)(""),X=Object(i.a)(Q,2),Z=X[0],$=X[1],_=Object(n.useState)(!0),ne=Object(i.a)(_,2),re=ne[0],le=ne[1],ce=Object(n.useState)(null),oe=Object(i.a)(ce,2),ue=oe[0],se=oe[1],ie=Object(n.useState)(""),me=Object(i.a)(ie,2),pe=me[0],de=me[1],fe={padding:5};Object(n.useEffect)((function(){E.getAll().then((function(e){return h(e)}))}),[]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);q(t),E.setToken(t.token)}}),[ue]);var be=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getBlogs(t.id);case 2:return a=e.sent,console.log(a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,x.login({username:N,password:P});case 4:a=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(a)),E.setToken(a.token),q(a),U(""),T(""),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),le(!1),j("Wrong credentials"),setTimeout((function(){j(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a={user:I,title:V,author:Z,url:Y,likes:0,id:Math.floor(101*Math.random())},n=I.token,e.next=6,E.create(a,n);case 6:r=e.sent,h(v.concat(r)),le(!0),j("A new Blog ".concat(V," by ").concat(Z," was added.")),setTimeout((function(){j(null)}),5e3),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),j("".concat(e.t0)),console.log(e.t0),setTimeout((function(){j(null)}),3e3);case 18:$(""),J(""),H(""),f(!1);case 22:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{window.localStorage.removeItem(I),q(null),window.localStorage.clear()}catch(a){le(!1),j("User doesn't exist or has already logged out"),setTimeout((function(){j(null)}),5e3)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return""!==pe?r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(m.b,{style:fe,to:"/"},"Home")),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/"},r.a.createElement("div",{class:"container"},r.a.createElement(te,{showUserProfile:pe,getUserBlogs:be,setShowUserProfile:de}))))):r.a.createElement("div",null,null===I?r.a.createElement("div",null,r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(m.b,{style:fe,to:"/login"},"Log In!"),r.a.createElement(m.b,{style:fe,to:"/signup"},"Sign Up!")),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/signup"},r.a.createElement(ee,{setStatus:le,setErrorMessage:j})),r.a.createElement(p.a,{path:"/login"},r.a.createElement(L,{username:N,password:P,handleUsernameChange:function(e){var t=e.target;return U(t.value)},handlePasswordChange:function(e){var t=e.target;return T(t.value)},handleSubmit:ge})))),r.a.createElement(ae,{status:re,message:O})):function(){var e={display:d?"none":""},t={display:d?"":"none"};return r.a.createElement("div",null,r.a.createElement(ae,{status:re,message:O}),r.a.createElement("h1",null,"Blogs"),r.a.createElement("p",null,I.username," logged in"),r.a.createElement("div",{style:e},r.a.createElement("button",{className:"button",onClick:function(){return f(!0)}},"New Blog")),r.a.createElement("div",{style:t},r.a.createElement(K,{showWhenVisible:t,setNewBlogVisible:f,newTitle:V,setNewTitle:J,newAuthor:Z,setNewAuthor:$,newUrl:Y,setNewUrl:H,addBlog:ve})),r.a.createElement("button",{className:"button",type:"button",onClick:he},"Logout"),v.map((function(e){return r.a.createElement(k,{key:e.id,blog:e,user:I,setShowUserProfile:de,setUpdate:se,blogs:v,setBlogs:h,setStatus:le,setErrorMessage:j})})))}())};c.a.render(r.a.createElement(ne,null),document.getElementById("root"))},76:function(e,t,a){e.exports=a.p+"static/media/art.c2ac66dc.png"},99:function(e,t,a){e.exports=a(128)}},[[99,1,2]]]);
//# sourceMappingURL=main.896e0cf4.chunk.js.map